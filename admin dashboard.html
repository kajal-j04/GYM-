<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Minnat Vigour Gym </title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Material Icons and MDL CSS -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
  <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
  
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <style>
    /* RESET SOME DEFAULTS */
    * {
      margin: 0; 
      padding: 0; 
      box-sizing: border-box;
      font-family: 'Roboto', sans-serif;
    }
    body {
      background: #f5f5f5;
    }
    /* SIDEBAR & HEADER */
    .mdl-layout__drawer {
      width: 240px;
      background: #1f1f1f; /* Dark sidebar */
    }
    .mdl-layout__drawer .mdl-layout-title {
      color: #fff;
      margin-left: 16px;
      font-size: 18px;
      line-height: 48px;
    }
    .mdl-navigation__link {
      color: #ccc !important;
    }
    .mdl-navigation__link:hover {
      background: #333;
      color: #fff !important;
    }
    .mdl-layout__header {
      background: #1f1f1f; /* Dark header */
      color: #fff;
    }
    .mdl-layout-title {
      font-size: 20px;
    }
    /* LOGOUT BUTTON IN HEADER */
    .logout-button {
      background-color: #ff5722;
      color: #fff;
      margin-right: 20px;
    }
    /* MAIN CONTENT AREA */
    .page-content {
      padding: 20px;
      width: 100%;
    }
    /* HIDING SECTIONS */
    .hidden { display: none; }
    /* LOGIN SECTION */
    .login-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh; 
      text-align: center;
    }
    .login-box {
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      width: 300px;
    }
    .login-box h3 {
      margin-bottom: 20px;
      color: #333;
    }
    .login-box label {
      display: block;
      text-align: left;
      margin-bottom: 5px;
      font-weight: bold;
    }
    .login-box input {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    .login-box button {
      background: #3f51b5;
      color: #fff;
      border: none;
      width: 100%;
      padding: 10px;
      border-radius: 5px;
      cursor: pointer;
    }
    .login-box button:hover {
      background: #303f9f;
    }
    /* DASHBOARD SECTION */
    .dashboard-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
      color: #333;
    }
    .dashboard-header {
      margin-bottom: 20px;
    }
    .dashboard-header h3 {
      font-weight: 400;
      margin-bottom: 5px;
    }
    .dashboard-header p {
      color: #555;
    }
    .stats-boxes {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }
    .stats-box {
      flex: 1;
      min-width: 180px;
      background: #fff;
      border-radius: 8px;
      padding: 16px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      text-align: center;
    }
    .stats-box h4 {
      margin-bottom: 10px;
      color: #333;
      font-weight: 500;
    }
    .stats-box p {
      font-size: 24px;
      font-weight: bold;
      color: #111;
    }
    .charts-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 20px;
    }
    .chart-box {
      flex: 1;
      min-width: 300px;
      background: #fff;
      border-radius: 8px;
      padding: 16px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      text-align: center;
    }
    .chart-box h4 {
      margin-bottom: 10px;
      color: #333;
    }
    canvas {
      width: 100% !important;
      max-height: 300px;
    }
    /* FORMS & TABLES SECTION */
    .form-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: calc(100vh - 64px);
      text-align: center;
      padding: 20px;
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 15px;
      width: 100%;
      max-width: 500px;
      padding: 20px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
    }
    form label {
      display: block;
      text-align: left;
      font-weight: bold;
    }
    input, button {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    button {
      background-color: #3f51b5;
      color: white;
      border: none;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background-color: #303f9f;
    }
    .list-container {
      margin: 20px auto;
      padding: 15px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      width: 100%;
      max-width: 700px;
      overflow-x: auto;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    table, th, td {
      border: 1px solid #ccc;
    }
    th, td {
      padding: 10px;
      text-align: center;
    }
    h4.section-heading {
      font-size: 1.3em;
      margin: 10px 0;
      color: #333;
      font-weight: 500;
    }
  </style>
</head>

<body>
  <!-- LOGIN SECTION (Shown first) -->
  <div id="login" class="login-container">
    <div class="login-box">
      <h3>Admin login here</h3>
      <form id="loginForm" onsubmit="handleLogin(event)">
        <label for="username">Username</label>
        <input type="text" id="username" placeholder="Username" required>
        <label for="password">Password</label>
        <input type="password" id="password" placeholder="Password" required>
        <button type="submit">Login</button>
      </form>
    </div>
  </div>

  <!-- MAIN APP LAYOUT (Hidden initially) -->
  <div id="appLayout" class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header hidden">
    <!-- HEADER -->
    <header class="mdl-layout__header">
      <div class="mdl-layout__header-row">
        <span class="mdl-layout-title">Minnat Vigour Gym </span>
        <div class="mdl-layout-spacer"></div>
        <!-- LOGOUT BUTTON -->
        <button class="mdl-button mdl-js-button mdl-button--raised logout-button" onclick="logoutUser()">
          LOGOUT
        </button>
      </div>
    </header>

    <!-- NAV DRAWER -->
    <div class="mdl-layout__drawer">
      <span class="mdl-layout-title">Navigation</span>
      <nav class="mdl-navigation">
        <a href="#" class="mdl-navigation__link" onclick="loadContent('Dashboard')">
          <i class="material-icons">dashboard</i> Dashboard
        </a>
        <a href="#" class="mdl-navigation__link" onclick="loadContent('trainer')">
          <i class="material-icons">fitness_center</i> Trainer
        </a>
        <a href="#" class="mdl-navigation__link" onclick="loadContent('member')">
          <i class="material-icons">people</i> Member
        </a>
        <a href="#" class="mdl-navigation__link" onclick="loadContent('package')">
          <i class="material-icons">inventory_2</i> Package
        </a>
        <a href="#" class="mdl-navigation__link" onclick="loadContent('equipment')">
          <i class="material-icons">build</i> Equipment
        </a>
      </nav>
    </div>

    <!-- MAIN CONTENT -->
    <main class="mdl-layout__content">
      <div id="content-area" class="form-container">
        <!-- Loaded Content Goes Here -->
      </div>
    </main>
  </div>

  <!-- ================== DASHBOARD SECTION ================== -->
  <div id="Dashboard" class="hidden page-content">
    <div class="dashboard-container">
      <!-- Greeting / Intro -->
      <div class="dashboard-header">
        <h3>Hello Admin</h3>
        <p>Welcome to your admin dashboard!</p>
      </div>

      <!-- Stats Boxes -->
      <div class="stats-boxes">
        <div class="dashboard-box">
          <h4>Number of Members</h4>
          <span id="dashMembers">0</span>
        </div>
        <div class="dashboard-box">
          <h4>Number of Equipment</h4>
          <span id="dashEquipment">0</span>
        </div>
        <div class="dashboard-box">
          <h4>Number of Success</h4>
          <span id="dashSuccess">1</span>
        </div>
        <div class="dashboard-box">
          <h4>Number of Packages</h4>
          <span id="dashPackages">0</span>
        </div>
      </div>

      <!-- Charts -->
      <div class="charts-container">
        <div class="chart-box">
          <h4>Attendance Reports</h4>
          <canvas id="attendanceChart"></canvas>
        </div>
        <div class="chart-box">
          <h4>Total Reports</h4>
          <canvas id="totalReportsChart"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- ================== TRAINER SECTION (Updated with Image Field) ================== -->
  <div id="trainer" class="hidden">
    <h4 class="section-heading">Add Trainer</h4>
    <form id="trainerForm" onsubmit="addTrainer(event)">
      <label for="trainerName">Trainer Name</label>
      <input type="text" id="trainerName" placeholder="Trainer Name" required>
      
      <label for="trainerEmail">Email</label>
      <input type="email" id="trainerEmail" placeholder="Email" required>
      
      <label for="trainerSpecialization">Specialization</label>
      <input type="text" id="trainerSpecialization" placeholder="Specialization" required>
      
      <label for="trainerPhone">Phone Number</label>
      <input type="text" id="trainerPhone" placeholder="Phone Number" required>
      
      <label for="trainerExperience">Years of Experience</label>
      <input type="text" id="trainerExperience" placeholder="Years of Experience" required>
      
      <label for="trainerImage">Upload Image</label>
      <input type="file" id="trainerImage" accept="image/*" required>
      
      <button type="submit">Submit</button>
    </form>
    <h4 class="section-heading">Trainer List</h4>
    <div class="list-container">
      <table id="trainerTable">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Specialization</th>
            <th>Phone</th>
            <th>Experience</th>
            <th>Image</th>
          </tr>
        </thead>
        <tbody id="trainerTableBody">
          <tr><td colspan="6">No trainers added yet.</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- ================== MEMBER SECTION (Added Image Field) ================== -->
  <div id="member" class="hidden">
    <h4 class="section-heading">Add Member</h4>
    <form id="memberForm" onsubmit="addMember(event)">
      <label for="memberName">Full Name</label>
      <input type="text" id="memberName" placeholder="Full Name" required>
      
      <label for="memberEmail">Email Address</label>
      <input type="email" id="memberEmail" placeholder="Email Address" required>
      
      <label for="memberPhone">Phone Number</label>
      <input type="text" id="memberPhone" placeholder="Phone Number" required>
      
      <label for="memberGender">Gender</label>
      <input type="text" id="memberGender" placeholder="Gender" required>
      
      <label for="memberDOB">Date of Birth</label>
      <input type="date" id="memberDOB" placeholder="Date of Birth" required>
      
      <label for="memberAddress">Address</label>
      <input type="text" id="memberAddress" placeholder="Address">
      
      <label for="memberImage">Upload Image</label>
      <input type="file" id="memberImage" accept="image/*">
      
      <button type="submit">Submit</button>
    </form>
    <h4 class="section-heading">Member List</h4>
    <div class="list-container">
      <table id="memberTable">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Gender</th>
            <th>Date of Birth</th>
            <th>Address</th>
            <th>Image</th>
          </tr>
        </thead>
        <tbody id="memberTableBody">
          <tr><td colspan="7">No members added yet.</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- ================== PACKAGE SECTION (Added Image Field) ================== -->
  <div id="package" class="hidden">
    <h4 class="section-heading">Add Package</h4>
    <form id="packageForm" onsubmit="addPackage(event)">
      <label for="packageName">Package Name</label>
      <input type="text" id="packageName" placeholder="Package Name" required>
      
      <label for="packageDuration">Duration (in months)</label>
      <input type="text" id="packageDuration" placeholder="Duration (in months)" required>
      
      <label for="packagePrice">Price</label>
      <input type="number" id="packagePrice" placeholder="Price" required>
      
      <label for="packageFeatures">Features</label>
      <input type="text" id="packageFeatures" placeholder="Features">
      
      <label for="packageImage">Upload Image</label>
      <input type="file" id="packageImage" accept="image/*">
      
      <button type="submit">Submit</button>
    </form>
    <h4 class="section-heading">Package List</h4>
    <div class="list-container">
      <table id="packageTable">
        <thead>
          <tr>
            <th>Package Name</th>
            <th>Duration</th>
            <th>Price</th>
            <th>Features</th>
            <th>Image</th>
          </tr>
        </thead>
        <tbody id="packageTableBody">
          <tr><td colspan="5">No packages added yet.</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- ================== EQUIPMENT SECTION (Added Image Field) ================== -->
  <div id="equipment" class="hidden">
    <h4 class="section-heading">Add Equipment</h4>
    <form id="equipmentForm" onsubmit="addEquipment(event)">
      <label for="equipmentName">Equipment Name</label>
      <input type="text" id="equipmentName" placeholder="Equipment Name" required>
      
      <label for="equipmentBrand">Brand</label>
      <input type="text" id="equipmentBrand" placeholder="Brand" required>
      
      <label for="equipmentType">Type</label>
      <input type="text" id="equipmentType" placeholder="Type" required>
      
      <label for="equipmentCount">Number of Items</label>
      <input type="number" id="equipmentCount" placeholder="Number of Items" required>
      
      <label for="equipmentImage">Upload Image</label>
      <input type="file" id="equipmentImage" accept="image/*">
      
      <button type="submit">Submit</button>
    </form>
    <h4 class="section-heading">Equipment List</h4>
    <div class="list-container">
      <table id="equipmentTable">
        <thead>
          <tr>
            <th>Equipment Name</th>
            <th>Brand</th>
            <th>Type</th>
            <th>Count</th>
            <th>Image</th>
          </tr>
        </thead>
        <tbody id="equipmentTableBody">
          <tr><td colspan="5">No equipment added yet.</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <script>
    //================= LOGIN HANDLER =================
    function handleLogin(e) {
      e.preventDefault();
      const user = document.getElementById('username').value;
      const pass = document.getElementById('password').value;
      if(user.trim() && pass.trim()) {
        document.getElementById('login').classList.add('hidden');
        document.getElementById('appLayout').classList.remove('hidden');
        loadContent('Dashboard');
        alert('Logged in successfully!');
      } else {
        alert('Please enter valid credentials!');
      }
    }

    //================= LOGOUT FUNCTION =================
    function logoutUser() {
      const now = new Date().toLocaleString();
      alert(`You have been logged out at: ${now}`);
      document.getElementById('appLayout').classList.add('hidden');
      document.getElementById('login').classList.remove('hidden');
      document.getElementById('username').value = '';
      document.getElementById('password').value = '';
    }

    //================= LOAD CONTENT =================
    function loadContent(page) {
      document.getElementById('content-area').innerHTML = document.getElementById(page).innerHTML;
      if(page === 'Dashboard') {
        initCharts();
        updateDashCounts();
      }
    }

    //================= DASHBOARD COUNTS =================
    function updateDashCounts() {
      const membersBody = document.getElementById('memberTableBody');
      const memberCount = (membersBody) ? membersBody.rows.length - 1 : 0;
      document.getElementById('dashMembers').textContent = (memberCount < 0) ? 0 : memberCount;
      const eqBody = document.getElementById('equipmentTableBody');
      const eqCount = (eqBody) ? eqBody.rows.length - 1 : 0;
      document.getElementById('dashEquipment').textContent = (eqCount < 0) ? 0 : eqCount;
      const pkgBody = document.getElementById('packageTableBody');
      const pkgCount = (pkgBody) ? pkgBody.rows.length - 1 : 0;
      document.getElementById('dashPackages').textContent = (pkgCount < 0) ? 0 : pkgCount;
    }

    //================= CHARTS =================
    let attendanceChart, totalReportsChart;
    function initCharts() {
      const attCtx = document.getElementById('attendanceChart');
      if (!attCtx) return;
      if (attendanceChart) { attendanceChart.destroy(); }
      attendanceChart = new Chart(attCtx, {
        type: 'bar',
        data: {
          labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
          datasets: [{
            label: 'Last Week Report',
            data: [12, 19, 3, 5, 2, 3],
            backgroundColor: '#2196f3'
          }]
        },
        options: { responsive: true, scales: { y: { beginAtZero: true } } }
      });
      
      const totalCtx = document.getElementById('totalReportsChart');
      if (!totalCtx) return;
      if (totalReportsChart) { totalReportsChart.destroy(); }
      totalReportsChart = new Chart(totalCtx, {
        type: 'pie',
        data: {
          labels: ['Packages', 'Members', 'Equipment'],
          datasets: [{
            data: [3, 6, 2],
            backgroundColor: ['#4caf50', '#ff9800', '#9c27b0']
          }]
        },
        options: { responsive: true }
      });
    }

    //================= FORM VALIDATION & SUBMISSION =================
    function clearForm(formId) {
      document.getElementById(formId).reset();
    }

    // Helper: Validate email
    function validateEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(email);
    }
    // Helper: Validate phone (at least 10 digits)
    function validatePhone(phone) {
      const re = /^\d{10,}$/;
      return re.test(phone);
    }
    // Helper: Check if value is a positive number
    function isPositiveNumber(value) {
      return !isNaN(value) && Number(value) > 0;
    }

    //================= TRAINER FORM SUBMISSION (Updated) =================
    function addTrainer(e) {
      e.preventDefault();
      const name = document.getElementById('trainerName').value.trim();
      const email = document.getElementById('trainerEmail').value.trim();
      const spec = document.getElementById('trainerSpecialization').value.trim();
      const phone = document.getElementById('trainerPhone').value.trim();
      const exp = document.getElementById('trainerExperience').value.trim();
      const imageFile = document.getElementById('trainerImage').files[0];
      
      if (!validateEmail(email)) {
        alert("Please enter a valid email address for Trainer.");
        return;
      }
      if (!validatePhone(phone)) {
        alert("Please enter a valid phone number (at least 10 digits) for Trainer.");
        return;
      }
      if (isNaN(exp) || Number(exp) <= 0) {
        alert("Please enter a valid number for years of experience.");
        return;
      }
      if (!imageFile) {
        alert("Please select an image file for the trainer.");
        return;
      }
      
      // Log the image file details (or process the file as needed)
      console.log("Selected trainer image:", imageFile);
      
      const tbody = document.getElementById('trainerTableBody');
      if (tbody.rows.length === 1 && tbody.rows[0].cells[0].textContent.includes('No trainers')) {
        tbody.innerHTML = '';
      }
      const row = tbody.insertRow();
      row.insertCell(0).textContent = name;
      row.insertCell(1).textContent = email;
      row.insertCell(2).textContent = spec;
      row.insertCell(3).textContent = phone;
      row.insertCell(4).textContent = exp;
      // Display the image file name (or add image preview if desired)
      row.insertCell(5).textContent = imageFile.name;
      
      alert('Trainer added successfully!');
      clearForm('trainerForm');
      updateDashCounts();
    }

    //================= MEMBER FORM SUBMISSION =================
    function addMember(e) {
      e.preventDefault();
      const name = document.getElementById('memberName').value.trim();
      const email = document.getElementById('memberEmail').value.trim();
      const phone = document.getElementById('memberPhone').value.trim();
      const gender = document.getElementById('memberGender').value.trim();
      const dob = document.getElementById('memberDOB').value;
      const addr = document.getElementById('memberAddress').value.trim();
      const imageFile = document.getElementById('memberImage').files[0];
      
      if (!validateEmail(email)) {
        alert("Please enter a valid email address for Member.");
        return;
      }
      if (!validatePhone(phone)) {
        alert("Please enter a valid phone number (at least 10 digits) for Member.");
        return;
      }
      
      const tbody = document.getElementById('memberTableBody');
      if (tbody.rows.length === 1 && tbody.rows[0].cells[0].textContent.includes('No members')) {
        tbody.innerHTML = '';
      }
      const row = tbody.insertRow();
      row.insertCell(0).textContent = name;
      row.insertCell(1).textContent = email;
      row.insertCell(2).textContent = phone;
      row.insertCell(3).textContent = gender;
      row.insertCell(4).textContent = dob;
      row.insertCell(5).textContent = addr;
      // Show image file name if selected
      row.insertCell(6).textContent = imageFile ? imageFile.name : "No image";
      
      alert('Member added successfully!');
      clearForm('memberForm');
      updateDashCounts();
    }

    //================= PACKAGE FORM SUBMISSION =================
    function addPackage(e) {
      e.preventDefault();
      const name = document.getElementById('packageName').value.trim();
      const dur = document.getElementById('packageDuration').value.trim();
      const price = document.getElementById('packagePrice').value.trim();
      const feat = document.getElementById('packageFeatures').value.trim();
      const imageFile = document.getElementById('packageImage').files[0];
      
      if (isNaN(dur) || Number(dur) <= 0) {
        alert("Please enter a valid duration (in months) for Package.");
        return;
      }
      if (isNaN(price) || Number(price) <= 0) {
        alert("Please enter a valid price for Package.");
        return;
      }
      
      const tbody = document.getElementById('packageTableBody');
      if (tbody.rows.length === 1 && tbody.rows[0].cells[0].textContent.includes('No packages')) {
        tbody.innerHTML = '';
      }
      const row = tbody.insertRow();
      row.insertCell(0).textContent = name;
      row.insertCell(1).textContent = dur;
      row.insertCell(2).textContent = price;
      row.insertCell(3).textContent = feat;
      // Show image file name if selected
      row.insertCell(4).textContent = imageFile ? imageFile.name : "No image";
      
      alert('Package added successfully!');
      clearForm('packageForm');
      updateDashCounts();
    }

    //================= EQUIPMENT FORM SUBMISSION =================
    function addEquipment(e) {
      e.preventDefault();
      const name = document.getElementById('equipmentName').value.trim();
      const brand = document.getElementById('equipmentBrand').value.trim();
      const type = document.getElementById('equipmentType').value.trim();
      const count = document.getElementById('equipmentCount').value.trim();
      const imageFile = document.getElementById('equipmentImage').files[0];
      
      if (!isPositiveNumber(count)) {
        alert("Please enter a valid number of items (must be a positive number).");
        return;
      }
      
      const tbody = document.getElementById('equipmentTableBody');
      if (tbody.rows.length === 1 && tbody.rows[0].cells[0].textContent.includes('No equipment')) {
        tbody.innerHTML = '';
      }
      const row = tbody.insertRow();
      row.insertCell(0).textContent = name;
      row.insertCell(1).textContent = brand;
      row.insertCell(2).textContent = type;
      row.insertCell(3).textContent = count;
      // Show image file name if selected
      row.insertCell(4).textContent = imageFile ? imageFile.name : "No image";
      
      alert('Equipment added successfully!');
      clearForm('equipmentForm');
      updateDashCounts();
    }

    // By default, show login on page load
    window.onload = function() {
      document.getElementById('login').classList.remove('hidden');
      document.getElementById('appLayout').classList.add('hidden');
    }
  </script>
</body>
</html>
